<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Site Info -->
    <title>{{ name }} - Blog</title>
    <meta name="description" content="{{ name }} - {{ summary }}">
    <meta name="author" content="{{ name }}">

    <!-- Open Graph Tags: The title of the page for social media sharing. It can match the title tag or be more descriptive. -->
    <meta property="og:title" content="{{ name }}">

    <!-- Open Graph Tags: Typically set to "website" for static sites or "article" for content-heavy pages. -->
    <meta property="og:type" content="website">

    <!-- Open Graph Tags: The URL of the page, used to ensure link previews resolve to the correct page. -->
    <!-- base_url -->
    <meta property="og:url" content="{{ base_url }}/blog.html">

    <!-- Open Graph Tags: URL of an image that represents the page. Useful for link previews. -->
    <!-- base_url -->
    <meta property="og:image" content="{{ base_url }}/{{ image_path }}">

    <!-- Open Graph Tags: Provides an alternative text for the image to improve accessibility. -->
    <meta property="og:image:alt" content="{{ name }} Profile Image">

    <!-- Preconnect for Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Custom Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
          rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="css/modern_normalize.css" />
    <link rel="stylesheet" href="css/html5bp.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/resume.css">

    <!-- Set a theme color that matches your website's primary color -->
    <meta name="theme-color" content="#fafafa">

    <!-- Favicon for all browsers -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">

    <!-- Apple touch icon for iOS devices -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icon.png">

    <!-- Web app manifest for Progressive Web Apps -->
    <link rel="manifest" href="/site.webmanifest">

    <!-- Add an icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Content Security Policy: Uncomment to enhance security by restricting where content can be loaded from (useful for preventing certain attacks like XSS). Update if adding external sources (e.g., Google Fonts, Bootstrap CDN, analytics, etc). -->
    <!-- <meta http-equiv="Content-Security-Policy" content=" default-src 'self'; script-src 'self' code.jquery.com; style-src 'self' fonts.googleapis.com; font-src fonts.gstatic.com; img-src 'self' images.examplecdn.com; "> -->
  </head>

<body>
    <header class="page-header">
        <div class="container">
            <div class="header-top flex-responsive">
                <div class="header-info">
                
                    <!-- name -->
                    <h1>{{ name }}'s Blog</h1>
                    <nav>
                        <ul class="inline-list flex-responsive">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="resume.html">Resume</a></li>
                            <li><a href="projects.html">Projects</a></li>
                            <li><a href="tech-stack.html">Tech Stack</a></li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <div class="page-content">
        <div class="container">
            <main>
                <section>
                    <h2 class="section-heading">Recent Posts</h2>
                    
                    <!-- blogs -->
                    {% for post in blogs %}
                    <article class="blog-post" data-tags="{{ post.core_technologies | join(',') | lower }}">
                        <h3 class="post-meta">
                            <a href="posts/{{ post.slug }}.html">{{ post.title }}</a>
                        </h3>
                        
                        <p class="section-label">Published on: {{ post.publish_date }}</p>
                        {% if post.content %}
                            <p>{{ post.content | markdown_to_html | safe }}</p>
                        {% endif %}
                        
                        <div class="tech-stack">
                            {% if post.technologies %}
                                {% for tech in post.core_technologies %}
                                    <span class="tag">{{ tech }}</span>
                                {% endfor %}

                                {% for keyword in post.keywords %}
                                    <span class="tag">{{ keyword }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>

                    </article>
                    {% endfor %}
                </section>
            </main>

            <!-- Sidebar Section -->
            <aside>
                <!-- PASTE THE FILTER SECTION YOU CUT EARLIER RIGHT HERE -->
                <section>
                <h2 class="section-heading">Filter by Technology</h2>
                <div id="tag-filter-container" class="tech-stack">
                    <button class="tag filter-tag active" data-tag="all">Show All</button>
                    {% for tag in tags %}
                        <button class="tag filter-tag" data-tag="{{ tag | lower }}">{{ tag }}</button>
                    {% endfor %}
                </div>
                </section>
            </aside>

        </div>
    </div>
    <footer class="page-footer">
        <div class="container">
            <p>Â© {{ current_year }} {{ name }}. All rights reserved.</p>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const tagContainer = document.getElementById('tag-filter-container');
                const blogPosts = document.querySelectorAll('.blog-post');

                tagContainer.addEventListener('click', function (e) {
                    // Only run if a filter-tag button was clicked
                    if (e.target.matches('.filter-tag')) {
                        // Update the active button style
                        tagContainer.querySelectorAll('.filter-tag').forEach(btn => btn.classList.remove('active'));
                        e.target.classList.add('active');

                        const selectedTag = e.target.getAttribute('data-tag').toLowerCase();

                        // Loop through all blog posts and show/hide them
                        blogPosts.forEach(post => {
                            const postTags = post.getAttribute('data-tags');
                            if (selectedTag === 'all' || postTags.includes(selectedTag)) {
                                post.style.display = 'block'; // Show the post
                            } else {
                                post.style.display = 'none'; // Hide the post
                            }
                        });
                    }
                });
            });
        </script>
        <style>
            /* Add some basic styling for the active button */
            .filter-tag { cursor: pointer; border: 1px solid transparent; }
            .filter-tag.active {
                border-color: var(--link-color, #0077cc);
                background-color: #cceeff; /* A light blue to indicate selection */
                color: #000;
            }
            /* Add these new rules to the <style> block at the bottom */

            /* Target the container to stack the buttons vertically */
                #tag-filter-container {
                display: flex;
                flex-direction: column; /* This is the key change */
                gap: 0.5rem; /* Adds space between the stacked buttons */
            }

            /* Make the buttons full-width and aligned left */
            #tag-filter-container .filter-tag {
                width: 100%;
                text-align: left;
                margin-right: 0; /* Remove the old horizontal margin */
            }
        </style>

    </footer>
    
    <!-- ===== Style Switcher Start ===== -->
    <div class="theme-toggle-container">
        <div id="theme-toggle-icon" class="theme-icon">
            <i class="fas"></i>
        </div>
    </div>
    <!-- ===== Style Switcher End ===== -->

    <script src="js/app.js"></script>

</body>
</html>